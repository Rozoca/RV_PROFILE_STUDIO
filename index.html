<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RV Profile Studio | Professional CV Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #fafaf9;
            --bg-secondary: #ffffff;
            --bg-accent: #1c1917;
            --text-primary: #1c1917;
            --text-secondary: #57534e;
            --text-muted: #a8a29e;
            --accent-gold: #b8860b;
            --accent-gold-light: #d4a846;
            --accent-copper: #a0522d;
            --border: #e7e5e4;
            --border-dark: #d6d3d1;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.06);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.08);
        }

        [data-theme="dark"] {
            --bg-primary: #0c0a09;
            --bg-secondary: #1c1917;
            --bg-accent: #fafaf9;
            --text-primary: #fafaf9;
            --text-secondary: #a8a29e;
            --text-muted: #78716c;
            --border: #292524;
            --border-dark: #44403c;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.2);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.3);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.7;
            font-size: 16px;
            transition: background 0.3s, color 0.3s;
        }

        /* Typography */
        h1, h2, h3, .serif {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-weight: 500;
        }

        /* Header */
        .header {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            background: var(--bg-secondary);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo-mark {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-copper) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            font-weight: 700;
            letter-spacing: -1px;
        }

        .logo-text h1 {
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .logo-text span {
            font-size: 0.75rem;
            color: var(--text-muted);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        /* Language Selector */
        .lang-selector {
            display: flex;
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 4px;
            border: 1px solid var(--border);
        }

        .lang-btn {
            padding: 8px 14px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .lang-btn:hover { color: var(--text-primary); }
        .lang-btn.active {
            background: var(--bg-secondary);
            color: var(--accent-gold);
            box-shadow: var(--shadow-sm);
        }

        /* Theme Toggle */
        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: var(--bg-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            transition: all 0.2s;
        }

        .theme-toggle:hover { border-color: var(--accent-gold); }

        /* Main Container */
        .main-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 60px 40px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            margin-bottom: 60px;
        }

        .hero h2 {
            font-size: 2.8rem;
            font-weight: 500;
            margin-bottom: 16px;
            letter-spacing: -1px;
        }

        .hero p {
            color: var(--text-secondary);
            font-size: 1.15rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Phase Tabs */
        .phase-tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 48px;
        }

        .phase-tab {
            padding: 16px 32px;
            border: 2px solid var(--border);
            background: var(--bg-secondary);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .phase-tab:hover { border-color: var(--border-dark); }

        .phase-tab.active {
            border-color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(184,134,11,0.05) 0%, rgba(160,82,45,0.05) 100%);
        }

        .phase-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .phase-tab.active .phase-number {
            background: var(--accent-gold);
            color: white;
        }

        .phase-tab.completed .phase-number {
            background: var(--success);
            color: white;
        }

        .phase-info h3 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            text-align: left;
        }

        .phase-info span {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Panels */
        .panel { display: none; animation: fadeUp 0.4s ease; }
        .panel.active { display: block; }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, rgba(184,134,11,0.1) 0%, rgba(160,82,45,0.1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .card-title h3 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .card-title span {
            font-size: 0.85rem;
            color: var(--text-muted);
            display: block;
        }

        /* Sector Grid */
        .sector-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .sector-option {
            padding: 20px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            background: var(--bg-secondary);
        }

        .sector-option:hover {
            border-color: var(--border-dark);
            transform: translateY(-2px);
        }

        .sector-option.selected {
            border-color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(184,134,11,0.05) 0%, rgba(160,82,45,0.05) 100%);
        }

        .sector-option .icon {
            font-size: 1.6rem;
            margin-bottom: 8px;
            display: block;
        }

        .sector-option .name {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        /* Level Pills */
        .level-pills {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .level-pill {
            flex: 1;
            min-width: 140px;
            padding: 16px 20px;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            background: var(--bg-secondary);
        }

        .level-pill:hover { border-color: var(--border-dark); }

        .level-pill.selected {
            border-color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(184,134,11,0.05) 0%, rgba(160,82,45,0.05) 100%);
        }

        .level-pill .label {
            font-weight: 600;
            font-size: 0.9rem;
            display: block;
            margin-bottom: 4px;
        }

        .level-pill .years {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Textarea */
        .text-input-wrapper {
            position: relative;
        }

        textarea {
            width: 100%;
            min-height: 240px;
            padding: 20px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Source Sans 3', sans-serif;
            font-size: 0.95rem;
            line-height: 1.7;
            resize: vertical;
            transition: border-color 0.2s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        textarea::placeholder { color: var(--text-muted); }

        .char-count {
            position: absolute;
            bottom: 12px;
            right: 16px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Buttons */
        .btn {
            padding: 14px 28px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            font-family: 'Source Sans 3', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-copper) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(184,134,11,0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover { border-color: var(--accent-gold); }

        .btn-ghost {
            background: transparent;
            color: var(--accent-gold);
            padding: 10px 16px;
        }

        .btn-ghost:hover { background: rgba(184,134,11,0.1); }

        .action-bar {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 32px;
        }

        /* API Section */
        .api-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-primary);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .toggle-switch {
            width: 48px;
            height: 26px;
            background: var(--border);
            border-radius: 13px;
            position: relative;
            cursor: pointer;
            transition: background 0.2s;
        }

        .toggle-switch.active { background: var(--accent-gold); }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: transform 0.2s;
            box-shadow: var(--shadow-sm);
        }

        .toggle-switch.active::after { transform: translateX(22px); }

        .api-input {
            display: none;
            margin-top: 16px;
        }

        .api-input.visible { display: block; }

        .api-input input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: 'Source Sans 3', sans-serif;
        }

        .api-input input:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        /* Loading */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .loading-overlay.visible { display: flex; }

        .loading-card {
            background: var(--bg-secondary);
            padding: 48px 64px;
            border-radius: 20px;
            text-align: center;
            box-shadow: var(--shadow-lg);
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--accent-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* Results */
        .results-section { display: none; }
        .results-section.visible { display: block; }

        /* Score Display */
        .score-hero {
            text-align: center;
            padding: 48px;
            background: linear-gradient(135deg, rgba(184,134,11,0.08) 0%, rgba(160,82,45,0.08) 100%);
            border-radius: 20px;
            margin-bottom: 32px;
        }

        .score-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 5rem;
            font-weight: 600;
            color: var(--accent-gold);
            line-height: 1;
        }

        .score-label {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 12px;
        }

        .score-meta {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-top: 24px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .meta-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .meta-dot.success { background: var(--success); }
        .meta-dot.warning { background: var(--warning); }
        .meta-dot.danger { background: var(--danger); }

        /* Competency Grid */
        .competency-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .radar-container {
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .competency-bars { display: grid; gap: 16px; }

        .comp-item {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .comp-name {
            width: 120px;
            font-size: 0.85rem;
            font-weight: 500;
            flex-shrink: 0;
        }

        .comp-bar {
            flex: 1;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .comp-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .comp-fill.excellent { background: var(--success); }
        .comp-fill.good { background: var(--accent-gold); }
        .comp-fill.moderate { background: var(--warning); }
        .comp-fill.low { background: var(--danger); }

        .comp-score {
            width: 40px;
            text-align: right;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* SWOT Grid */
        .swot-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .swot-box {
            padding: 24px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .swot-box.strengths { border-left: 4px solid var(--success); }
        .swot-box.weaknesses { border-left: 4px solid var(--danger); }
        .swot-box.opportunities { border-left: 4px solid var(--accent-gold); }
        .swot-box.threats { border-left: 4px solid var(--warning); }

        .swot-title {
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .swot-box.strengths .swot-title { color: var(--success); }
        .swot-box.weaknesses .swot-title { color: var(--danger); }
        .swot-box.opportunities .swot-title { color: var(--accent-gold); }
        .swot-box.threats .swot-title { color: var(--warning); }

        .swot-list {
            list-style: none;
            font-size: 0.9rem;
            line-height: 1.8;
        }

        .swot-list li { padding-left: 16px; position: relative; }
        .swot-list li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--text-muted);
        }

        /* Keywords */
        .keywords-section { margin-bottom: 20px; }

        .keywords-label {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .keywords-container { display: flex; flex-wrap: wrap; gap: 8px; }

        .keyword-tag {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .keyword-tag.found { background: rgba(5,150,105,0.1); color: var(--success); border: 1px solid rgba(5,150,105,0.2); }
        .keyword-tag.missing { background: rgba(220,38,38,0.1); color: var(--danger); border: 1px solid rgba(220,38,38,0.2); }
        .keyword-tag.golden { background: linear-gradient(135deg, var(--accent-gold), var(--accent-copper)); color: white; }

        /* Recommendations */
        .recommendation-item {
            display: flex;
            gap: 16px;
            padding: 20px;
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 12px;
            transition: border-color 0.2s;
        }

        .recommendation-item:hover { border-color: var(--accent-gold); }

        .rec-priority {
            width: 8px;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .rec-priority.critical { background: var(--danger); }
        .rec-priority.high { background: var(--warning); }
        .rec-priority.medium { background: var(--accent-gold); }

        .rec-content h4 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .rec-content p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px;
            border-top: 1px solid var(--border);
            margin-top: 60px;
        }

        .footer-brand {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .footer-brand .logo-mark {
            width: 32px;
            height: 32px;
            font-size: 1rem;
        }

        .footer p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sector-grid { grid-template-columns: repeat(2, 1fr); }
            .competency-grid { grid-template-columns: 1fr; }
            .swot-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 600px) {
            .header { padding: 16px 20px; }
            .main-container { padding: 32px 20px; }
            .hero h2 { font-size: 2rem; }
            .phase-tabs { flex-direction: column; }
            .sector-grid { grid-template-columns: 1fr; }
            .level-pills { flex-direction: column; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-mark">RV</div>
            <div class="logo-text">
                <h1>Profile Studio</h1>
                <span data-i18n="tagline">Professional Analysis</span>
            </div>
        </div>
        <div class="header-controls">
            <div class="lang-selector">
                <button class="lang-btn active" onclick="setLanguage('es')">ES</button>
                <button class="lang-btn" onclick="setLanguage('en')">EN</button>
                <button class="lang-btn" onclick="setLanguage('pt')">PT</button>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
        </div>
    </header>

    <!-- Main -->
    <main class="main-container">
        <!-- Hero -->
        <section class="hero">
            <h2 data-i18n="hero_title">Analiza tu perfil profesional</h2>
            <p data-i18n="hero_subtitle">Evaluaci√≥n inteligente de competencias con an√°lisis DAFO y recomendaciones personalizadas</p>
        </section>

        <!-- Phase Tabs -->
        <div class="phase-tabs">
            <div class="phase-tab active" id="tab1" onclick="goToPhase(1)">
                <div class="phase-number">1</div>
                <div class="phase-info">
                    <h3 data-i18n="phase1_title">An√°lisis del Perfil</h3>
                    <span data-i18n="phase1_desc">Evaluaci√≥n de competencias</span>
                </div>
            </div>
            <div class="phase-tab" id="tab2" onclick="goToPhase(2)">
                <div class="phase-number">2</div>
                <div class="phase-info">
                    <h3 data-i18n="phase2_title">Adecuaci√≥n al Puesto</h3>
                    <span data-i18n="phase2_desc">Opcional: comparar con oferta</span>
                </div>
            </div>
        </div>

        <!-- Phase 1: Profile Analysis -->
        <div class="panel active" id="phase1">
            <!-- Configuration -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">‚öôÔ∏è</div>
                        <div>
                            <h3 data-i18n="config_title">Configuraci√≥n</h3>
                            <span data-i18n="config_desc">Define el contexto del an√°lisis</span>
                        </div>
                    </div>
                </div>

                <!-- Sector -->
                <div style="margin-bottom: 28px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 14px; font-size: 0.9rem;" data-i18n="sector_label">Sector / Industria</label>
                    <div class="sector-grid" id="sectorGrid">
                        <div class="sector-option" data-sector="finance" onclick="selectSector(this)">
                            <span class="icon">üè¶</span>
                            <span class="name" data-i18n="sector_finance">Banca / Finanzas</span>
                        </div>
                        <div class="sector-option" data-sector="tech" onclick="selectSector(this)">
                            <span class="icon">üíª</span>
                            <span class="name" data-i18n="sector_tech">Tecnolog√≠a / IT</span>
                        </div>
                        <div class="sector-option" data-sector="consulting" onclick="selectSector(this)">
                            <span class="icon">üìä</span>
                            <span class="name" data-i18n="sector_consulting">Consultor√≠a</span>
                        </div>
                        <div class="sector-option" data-sector="marketing" onclick="selectSector(this)">
                            <span class="icon">üì¢</span>
                            <span class="name" data-i18n="sector_marketing">Marketing</span>
                        </div>
                        <div class="sector-option" data-sector="hr" onclick="selectSector(this)">
                            <span class="icon">üë•</span>
                            <span class="name" data-i18n="sector_hr">Recursos Humanos</span>
                        </div>
                        <div class="sector-option" data-sector="legal" onclick="selectSector(this)">
                            <span class="icon">‚öñÔ∏è</span>
                            <span class="name" data-i18n="sector_legal">Legal</span>
                        </div>
                        <div class="sector-option" data-sector="health" onclick="selectSector(this)">
                            <span class="icon">üè•</span>
                            <span class="name" data-i18n="sector_health">Salud / Pharma</span>
                        </div>
                        <div class="sector-option" data-sector="general" onclick="selectSector(this)">
                            <span class="icon">üåê</span>
                            <span class="name" data-i18n="sector_general">Otro / General</span>
                        </div>
                    </div>
                </div>

                <!-- Level -->
                <div style="margin-bottom: 28px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 14px; font-size: 0.9rem;" data-i18n="level_label">Nivel profesional</label>
                    <div class="level-pills" id="levelPills">
                        <div class="level-pill" data-level="junior" onclick="selectLevel(this)">
                            <span class="label">Entry / Junior</span>
                            <span class="years" data-i18n="years_0_3">0-3 a√±os</span>
                        </div>
                        <div class="level-pill" data-level="mid" onclick="selectLevel(this)">
                            <span class="label">Mid-Level</span>
                            <span class="years" data-i18n="years_3_7">3-7 a√±os</span>
                        </div>
                        <div class="level-pill" data-level="senior" onclick="selectLevel(this)">
                            <span class="label">Senior / Lead</span>
                            <span class="years" data-i18n="years_7_12">7-12 a√±os</span>
                        </div>
                        <div class="level-pill" data-level="director" onclick="selectLevel(this)">
                            <span class="label">Director / Exec</span>
                            <span class="years" data-i18n="years_12_plus">12+ a√±os</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CV Input -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üìÑ</div>
                        <div>
                            <h3 data-i18n="cv_title">Curr√≠culum Vitae</h3>
                            <span data-i18n="cv_desc">Pega el contenido de tu CV</span>
                        </div>
                    </div>
                    <button class="btn-ghost" onclick="loadExampleCV()" data-i18n="load_example">Cargar ejemplo</button>
                </div>
                <div class="text-input-wrapper">
                    <textarea id="cvInput" placeholder="Pega aqu√≠ el contenido de tu CV..." data-i18n-placeholder="cv_placeholder"></textarea>
                    <span class="char-count"><span id="cvCharCount">0</span> caracteres</span>
                </div>
            </div>

            <!-- API Toggle -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üß†</div>
                        <div>
                            <h3 data-i18n="analysis_mode">Modo de an√°lisis</h3>
                            <span data-i18n="analysis_mode_desc">Elige entre an√°lisis r√°pido o con IA</span>
                        </div>
                    </div>
                </div>
                <div class="api-toggle">
                    <div class="toggle-switch" id="aiToggle" onclick="toggleAI()"></div>
                    <div>
                        <span style="font-weight: 600;" data-i18n="ai_analysis">An√°lisis con Claude AI</span>
                        <span style="display: block; font-size: 0.85rem; color: var(--text-muted);" data-i18n="ai_analysis_desc">An√°lisis m√°s profundo y contextual (requiere API Key)</span>
                    </div>
                </div>
                <div class="api-input" id="apiInput">
                    <input type="password" id="apiKey" placeholder="sk-ant-api03-..." data-i18n-placeholder="api_placeholder">
                </div>
            </div>

            <!-- Action -->
            <div class="action-bar">
                <button class="btn btn-primary" id="analyzeBtn" onclick="analyzeProfile()" disabled>
                    <span data-i18n="analyze_btn">Analizar Perfil</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Phase 2: Job Fit -->
        <div class="panel" id="phase2">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üìã</div>
                        <div>
                            <h3 data-i18n="job_title">Descripci√≥n del puesto</h3>
                            <span data-i18n="job_desc">Pega la oferta de trabajo para comparar</span>
                        </div>
                    </div>
                    <button class="btn-ghost" onclick="loadExampleJob()" data-i18n="load_example">Cargar ejemplo</button>
                </div>
                <div class="text-input-wrapper">
                    <textarea id="jobInput" placeholder="Pega aqu√≠ la descripci√≥n del puesto..." data-i18n-placeholder="job_placeholder"></textarea>
                    <span class="char-count"><span id="jobCharCount">0</span> caracteres</span>
                </div>
            </div>

            <div class="action-bar">
                <button class="btn btn-secondary" onclick="goToPhase(1)">
                    <span>‚Üê</span>
                    <span data-i18n="back_btn">Volver</span>
                </button>
                <button class="btn btn-primary" id="compareFitBtn" onclick="analyzeJobFit()" disabled>
                    <span data-i18n="compare_btn">Analizar Adecuaci√≥n</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection">
            <!-- Score -->
            <div class="score-hero">
                <div class="score-value" id="mainScore">‚Äî</div>
                <div class="score-label" id="scoreLabel" data-i18n="profile_score">Puntuaci√≥n del Perfil</div>
                <div class="score-meta" id="scoreMeta"></div>
            </div>

            <!-- Competencies -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üìä</div>
                        <div>
                            <h3 data-i18n="competencies_title">Competencias</h3>
                            <span data-i18n="competencies_desc">Evaluaci√≥n por √°reas</span>
                        </div>
                    </div>
                </div>
                <div class="competency-grid">
                    <div class="radar-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                    <div class="competency-bars" id="competencyBars"></div>
                </div>
            </div>

            <!-- SWOT -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üéØ</div>
                        <div>
                            <h3 data-i18n="swot_title">An√°lisis DAFO</h3>
                            <span data-i18n="swot_desc">Fortalezas, debilidades, oportunidades y amenazas</span>
                        </div>
                    </div>
                </div>
                <div class="swot-grid">
                    <div class="swot-box strengths">
                        <div class="swot-title" data-i18n="strengths">Fortalezas</div>
                        <ul class="swot-list" id="strengths"></ul>
                    </div>
                    <div class="swot-box weaknesses">
                        <div class="swot-title" data-i18n="weaknesses">Debilidades</div>
                        <ul class="swot-list" id="weaknesses"></ul>
                    </div>
                    <div class="swot-box opportunities">
                        <div class="swot-title" data-i18n="opportunities">Oportunidades</div>
                        <ul class="swot-list" id="opportunities"></ul>
                    </div>
                    <div class="swot-box threats">
                        <div class="swot-title" data-i18n="threats">Amenazas</div>
                        <ul class="swot-list" id="threats"></ul>
                    </div>
                </div>
            </div>

            <!-- Keywords (only in Job Fit mode) -->
            <div class="card" id="keywordsCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üîë</div>
                        <div>
                            <h3 data-i18n="keywords_title">Palabras Clave</h3>
                            <span data-i18n="keywords_desc">Coincidencias con la oferta</span>
                        </div>
                    </div>
                </div>
                <div class="keywords-section">
                    <div class="keywords-label">‚≠ê <span data-i18n="golden_keywords">Keywords estrat√©gicas</span></div>
                    <div class="keywords-container" id="goldenKeywords"></div>
                </div>
                <div class="keywords-section">
                    <div class="keywords-label">‚úì <span data-i18n="found_keywords">Encontradas</span></div>
                    <div class="keywords-container" id="foundKeywords"></div>
                </div>
                <div class="keywords-section">
                    <div class="keywords-label">‚úó <span data-i18n="missing_keywords">Ausentes</span></div>
                    <div class="keywords-container" id="missingKeywords"></div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">üí°</div>
                        <div>
                            <h3 data-i18n="recommendations_title">Recomendaciones</h3>
                            <span data-i18n="recommendations_desc">Plan de mejora personalizado</span>
                        </div>
                    </div>
                </div>
                <div id="recommendations"></div>
            </div>

            <!-- Continue to Phase 2 -->
            <div class="action-bar" id="continueToPhase2" style="display: none;">
                <button class="btn btn-primary" onclick="goToPhase(2)">
                    <span data-i18n="continue_phase2">Continuar con Adecuaci√≥n al Puesto</span>
                    <span>‚Üí</span>
                </button>
            </div>

            <!-- New Analysis -->
            <div class="action-bar">
                <button class="btn btn-secondary" onclick="newAnalysis()">
                    <span data-i18n="new_analysis">Nuevo An√°lisis</span>
                </button>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading">
        <div class="loading-card">
            <div class="spinner"></div>
            <p data-i18n="analyzing">Analizando perfil...</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-brand">
            <div class="logo-mark">RV</div>
            <span style="font-weight: 500;">RV Profile Studio</span>
        </div>
        <p data-i18n="footer_text">Herramienta profesional de an√°lisis de perfiles ‚Ä¢ Versi√≥n 5.0</p>
    </footer>

    <script>
        // ==================== I18N ====================
        const translations = {
            es: {
                tagline: "An√°lisis Profesional",
                hero_title: "Analiza tu perfil profesional",
                hero_subtitle: "Evaluaci√≥n inteligente de competencias con an√°lisis DAFO y recomendaciones personalizadas",
                phase1_title: "An√°lisis del Perfil",
                phase1_desc: "Evaluaci√≥n de competencias",
                phase2_title: "Adecuaci√≥n al Puesto",
                phase2_desc: "Opcional: comparar con oferta",
                config_title: "Configuraci√≥n",
                config_desc: "Define el contexto del an√°lisis",
                sector_label: "Sector / Industria",
                sector_finance: "Banca / Finanzas",
                sector_tech: "Tecnolog√≠a / IT",
                sector_consulting: "Consultor√≠a",
                sector_marketing: "Marketing",
                sector_hr: "Recursos Humanos",
                sector_legal: "Legal",
                sector_health: "Salud / Pharma",
                sector_general: "Otro / General",
                level_label: "Nivel profesional",
                years_0_3: "0-3 a√±os",
                years_3_7: "3-7 a√±os",
                years_7_12: "7-12 a√±os",
                years_12_plus: "12+ a√±os",
                cv_title: "Curr√≠culum Vitae",
                cv_desc: "Pega el contenido de tu CV",
                cv_placeholder: "Pega aqu√≠ el contenido de tu CV...",
                load_example: "Cargar ejemplo",
                analysis_mode: "Modo de an√°lisis",
                analysis_mode_desc: "Elige entre an√°lisis r√°pido o con IA",
                ai_analysis: "An√°lisis con Claude AI",
                ai_analysis_desc: "An√°lisis m√°s profundo y contextual (requiere API Key)",
                api_placeholder: "sk-ant-api03-...",
                analyze_btn: "Analizar Perfil",
                job_title: "Descripci√≥n del puesto",
                job_desc: "Pega la oferta de trabajo para comparar",
                job_placeholder: "Pega aqu√≠ la descripci√≥n del puesto...",
                back_btn: "Volver",
                compare_btn: "Analizar Adecuaci√≥n",
                profile_score: "Puntuaci√≥n del Perfil",
                fit_score: "Adecuaci√≥n al Puesto",
                competencies_title: "Competencias",
                competencies_desc: "Evaluaci√≥n por √°reas",
                swot_title: "An√°lisis DAFO",
                swot_desc: "Fortalezas, debilidades, oportunidades y amenazas",
                strengths: "Fortalezas",
                weaknesses: "Debilidades",
                opportunities: "Oportunidades",
                threats: "Amenazas",
                keywords_title: "Palabras Clave",
                keywords_desc: "Coincidencias con la oferta",
                golden_keywords: "Keywords estrat√©gicas",
                found_keywords: "Encontradas",
                missing_keywords: "Ausentes",
                recommendations_title: "Recomendaciones",
                recommendations_desc: "Plan de mejora personalizado",
                continue_phase2: "Continuar con Adecuaci√≥n al Puesto",
                new_analysis: "Nuevo An√°lisis",
                analyzing: "Analizando perfil...",
                footer_text: "Herramienta profesional de an√°lisis de perfiles ‚Ä¢ Versi√≥n 5.0"
            },
            en: {
                tagline: "Professional Analysis",
                hero_title: "Analyze your professional profile",
                hero_subtitle: "Intelligent competency assessment with SWOT analysis and personalized recommendations",
                phase1_title: "Profile Analysis",
                phase1_desc: "Competency evaluation",
                phase2_title: "Job Fit",
                phase2_desc: "Optional: compare with job offer",
                config_title: "Configuration",
                config_desc: "Define the analysis context",
                sector_label: "Sector / Industry",
                sector_finance: "Banking / Finance",
                sector_tech: "Technology / IT",
                sector_consulting: "Consulting",
                sector_marketing: "Marketing",
                sector_hr: "Human Resources",
                sector_legal: "Legal",
                sector_health: "Healthcare / Pharma",
                sector_general: "Other / General",
                level_label: "Professional level",
                years_0_3: "0-3 years",
                years_3_7: "3-7 years",
                years_7_12: "7-12 years",
                years_12_plus: "12+ years",
                cv_title: "Curriculum Vitae",
                cv_desc: "Paste your CV content",
                cv_placeholder: "Paste your CV content here...",
                load_example: "Load example",
                analysis_mode: "Analysis mode",
                analysis_mode_desc: "Choose between quick analysis or AI-powered",
                ai_analysis: "Claude AI Analysis",
                ai_analysis_desc: "Deeper contextual analysis (requires API Key)",
                api_placeholder: "sk-ant-api03-...",
                analyze_btn: "Analyze Profile",
                job_title: "Job Description",
                job_desc: "Paste the job offer to compare",
                job_placeholder: "Paste the job description here...",
                back_btn: "Back",
                compare_btn: "Analyze Fit",
                profile_score: "Profile Score",
                fit_score: "Job Fit Score",
                competencies_title: "Competencies",
                competencies_desc: "Assessment by areas",
                swot_title: "SWOT Analysis",
                swot_desc: "Strengths, weaknesses, opportunities and threats",
                strengths: "Strengths",
                weaknesses: "Weaknesses",
                opportunities: "Opportunities",
                threats: "Threats",
                keywords_title: "Keywords",
                keywords_desc: "Matches with job offer",
                golden_keywords: "Strategic keywords",
                found_keywords: "Found",
                missing_keywords: "Missing",
                recommendations_title: "Recommendations",
                recommendations_desc: "Personalized improvement plan",
                continue_phase2: "Continue to Job Fit Analysis",
                new_analysis: "New Analysis",
                analyzing: "Analyzing profile...",
                footer_text: "Professional profile analysis tool ‚Ä¢ Version 5.0"
            },
            pt: {
                tagline: "An√°lise Profissional",
                hero_title: "Analise seu perfil profissional",
                hero_subtitle: "Avalia√ß√£o inteligente de compet√™ncias com an√°lise SWOT e recomenda√ß√µes personalizadas",
                phase1_title: "An√°lise do Perfil",
                phase1_desc: "Avalia√ß√£o de compet√™ncias",
                phase2_title: "Adequa√ß√£o ao Cargo",
                phase2_desc: "Opcional: comparar com vaga",
                config_title: "Configura√ß√£o",
                config_desc: "Defina o contexto da an√°lise",
                sector_label: "Setor / Ind√∫stria",
                sector_finance: "Banc√°rio / Finan√ßas",
                sector_tech: "Tecnologia / TI",
                sector_consulting: "Consultoria",
                sector_marketing: "Marketing",
                sector_hr: "Recursos Humanos",
                sector_legal: "Jur√≠dico",
                sector_health: "Sa√∫de / Pharma",
                sector_general: "Outro / Geral",
                level_label: "N√≠vel profissional",
                years_0_3: "0-3 anos",
                years_3_7: "3-7 anos",
                years_7_12: "7-12 anos",
                years_12_plus: "12+ anos",
                cv_title: "Curr√≠culo",
                cv_desc: "Cole o conte√∫do do seu curr√≠culo",
                cv_placeholder: "Cole aqui o conte√∫do do seu curr√≠culo...",
                load_example: "Carregar exemplo",
                analysis_mode: "Modo de an√°lise",
                analysis_mode_desc: "Escolha entre an√°lise r√°pida ou com IA",
                ai_analysis: "An√°lise com Claude AI",
                ai_analysis_desc: "An√°lise mais profunda e contextual (requer API Key)",
                api_placeholder: "sk-ant-api03-...",
                analyze_btn: "Analisar Perfil",
                job_title: "Descri√ß√£o da Vaga",
                job_desc: "Cole a oferta de emprego para comparar",
                job_placeholder: "Cole aqui a descri√ß√£o da vaga...",
                back_btn: "Voltar",
                compare_btn: "Analisar Adequa√ß√£o",
                profile_score: "Pontua√ß√£o do Perfil",
                fit_score: "Adequa√ß√£o √† Vaga",
                competencies_title: "Compet√™ncias",
                competencies_desc: "Avalia√ß√£o por √°reas",
                swot_title: "An√°lise SWOT",
                swot_desc: "For√ßas, fraquezas, oportunidades e amea√ßas",
                strengths: "For√ßas",
                weaknesses: "Fraquezas",
                opportunities: "Oportunidades",
                threats: "Amea√ßas",
                keywords_title: "Palavras-Chave",
                keywords_desc: "Correspond√™ncias com a vaga",
                golden_keywords: "Keywords estrat√©gicas",
                found_keywords: "Encontradas",
                missing_keywords: "Ausentes",
                recommendations_title: "Recomenda√ß√µes",
                recommendations_desc: "Plano de melhoria personalizado",
                continue_phase2: "Continuar para Adequa√ß√£o √† Vaga",
                new_analysis: "Nova An√°lise",
                analyzing: "Analisando perfil...",
                footer_text: "Ferramenta profissional de an√°lise de perfis ‚Ä¢ Vers√£o 5.0"
            }
        };

        let currentLang = 'es';
        let currentTheme = 'light';
        let selectedSector = null;
        let selectedLevel = null;
        let useAI = false;
        let radarChart = null;
        let currentPhase = 1;
        let profileAnalysisResult = null;

        // ==================== LANGUAGE ====================
        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.lang-btn[onclick="setLanguage('${lang}')"]`).classList.add('active');
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (translations[lang][key]) {
                    el.placeholder = translations[lang][key];
                }
            });
        }

        // ==================== THEME ====================
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', currentTheme === 'dark' ? 'dark' : '');
            document.querySelector('.theme-toggle').textContent = currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        // ==================== SELECTION ====================
        function selectSector(el) {
            document.querySelectorAll('.sector-option').forEach(opt => opt.classList.remove('selected'));
            el.classList.add('selected');
            selectedSector = el.dataset.sector;
            checkReady();
        }

        function selectLevel(el) {
            document.querySelectorAll('.level-pill').forEach(opt => opt.classList.remove('selected'));
            el.classList.add('selected');
            selectedLevel = el.dataset.level;
            checkReady();
        }

        function toggleAI() {
            useAI = !useAI;
            document.getElementById('aiToggle').classList.toggle('active', useAI);
            document.getElementById('apiInput').classList.toggle('visible', useAI);
        }

        function checkReady() {
            const cvText = document.getElementById('cvInput').value.trim();
            const ready = selectedSector && selectedLevel && cvText.length > 50;
            document.getElementById('analyzeBtn').disabled = !ready;
            
            const jobText = document.getElementById('jobInput').value.trim();
            document.getElementById('compareFitBtn').disabled = !ready || jobText.length < 50;
        }

        // ==================== NAVIGATION ====================
        function goToPhase(phase) {
            currentPhase = phase;
            document.querySelectorAll('.phase-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
            
            document.getElementById(`tab${phase}`).classList.add('active');
            document.getElementById(`phase${phase}`).classList.add('active');
            
            document.getElementById('resultsSection').classList.remove('visible');
        }

        function newAnalysis() {
            document.getElementById('cvInput').value = '';
            document.getElementById('jobInput').value = '';
            document.getElementById('resultsSection').classList.remove('visible');
            profileAnalysisResult = null;
            goToPhase(1);
            document.querySelectorAll('.sector-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.level-pill').forEach(opt => opt.classList.remove('selected'));
            selectedSector = null;
            selectedLevel = null;
            checkReady();
        }

        // ==================== CHAR COUNTS ====================
        document.getElementById('cvInput').addEventListener('input', function() {
            document.getElementById('cvCharCount').textContent = this.value.length;
            checkReady();
        });

        document.getElementById('jobInput').addEventListener('input', function() {
            document.getElementById('jobCharCount').textContent = this.value.length;
            checkReady();
        });

        // ==================== EXAMPLES ====================
        function loadExampleCV() {
            const examples = {
                es: `RODRIGO VIDAL
Strategic Process Manager | Pagos & Transformaci√≥n Digital
Madrid, Espa√±a

PERFIL EJECUTIVO
Gestor de proyectos estrat√©gicos con +19 a√±os de experiencia internacional en sistemas de pagos y transformaci√≥n digital. Experiencia consolidada en entornos bancarios de alta complejidad, liderando proyectos de migraci√≥n SEPA, pagos instant√°neos y Euro Digital. Formaci√≥n en la Armada de Brasil, combinando disciplina operativa con metodolog√≠as Lean Management y gesti√≥n del cambio.

EXPERIENCIA PROFESIONAL

ING Espa√±a & Portugal | Strategic Process Manager | 2022 - Presente
‚Ä¢ Propietario de proceso de SEPA Instant Payments
‚Ä¢ Coordinador de seguimiento del proyecto Euro Digital
‚Ä¢ Creador del Foro de Expertos en Pagos (57 profesionales, 95% satisfacci√≥n)

BME Group | SWIFT Project Manager | 2018 - 2022
‚Ä¢ Gesti√≥n de proyectos SWIFT/ISO20022 para mercados financieros
‚Ä¢ Implementaci√≥n de automatizaciones MT199/MT999

FORMACI√ìN
‚Ä¢ Executive MBA - EAE Business School
‚Ä¢ M√°ster en Direcci√≥n de Proyectos - Universitat de Barcelona
‚Ä¢ Oficial de Log√≠stica - Armada de Brasil

COMPETENCIAS T√âCNICAS
SWIFT, ISO20022, SEPA, Pagos Instant√°neos, Euro Digital, Lean Six Sigma, Value Stream Mapping

IDIOMAS
Espa√±ol (Nativo), Portugu√©s (Nativo), Ingl√©s (Avanzado B2+)`,
                en: `RODRIGO VIDAL
Strategic Process Manager | Payments & Digital Transformation
Madrid, Spain

EXECUTIVE PROFILE
Strategic project manager with 19+ years of international experience in payment systems and digital transformation. Consolidated experience in highly complex banking environments, leading SEPA migration projects, instant payments and Digital Euro. Brazilian Navy training, combining operational discipline with Lean Management methodologies and change management.

PROFESSIONAL EXPERIENCE

ING Spain & Portugal | Strategic Process Manager | 2022 - Present
‚Ä¢ SEPA Instant Payments Process Owner
‚Ä¢ Digital Euro project follow-up coordinator
‚Ä¢ Creator of the Forum of Payment Experts (57 professionals, 95% satisfaction)

BME Group | SWIFT Project Manager | 2018 - 2022
‚Ä¢ SWIFT/ISO20022 project management for financial markets
‚Ä¢ MT199/MT999 automation implementation

EDUCATION
‚Ä¢ Executive MBA - EAE Business School
‚Ä¢ Master in Project Management - Universitat de Barcelona
‚Ä¢ Logistics Officer - Brazilian Navy

TECHNICAL COMPETENCIES
SWIFT, ISO20022, SEPA, Instant Payments, Digital Euro, Lean Six Sigma, Value Stream Mapping

LANGUAGES
Spanish (Native), Portuguese (Native), English (Advanced B2+)`,
                pt: `RODRIGO VIDAL
Gestor de Processos Estrat√©gicos | Pagamentos & Transforma√ß√£o Digital
Madrid, Espanha

PERFIL EXECUTIVO
Gestor de projetos estrat√©gicos com +19 anos de experi√™ncia internacional em sistemas de pagamentos e transforma√ß√£o digital. Experi√™ncia consolidada em ambientes banc√°rios de alta complexidade, liderando projetos de migra√ß√£o SEPA, pagamentos instant√¢neos e Euro Digital. Forma√ß√£o na Marinha do Brasil, combinando disciplina operacional com metodologias Lean Management e gest√£o de mudan√ßas.

EXPERI√äNCIA PROFISSIONAL

ING Espanha & Portugal | Strategic Process Manager | 2022 - Presente
‚Ä¢ Propriet√°rio de processo de SEPA Instant Payments
‚Ä¢ Coordenador de acompanhamento do projeto Euro Digital
‚Ä¢ Criador do F√≥rum de Especialistas em Pagamentos (57 profissionais, 95% satisfa√ß√£o)

BME Group | SWIFT Project Manager | 2018 - 2022
‚Ä¢ Gest√£o de projetos SWIFT/ISO20022 para mercados financeiros
‚Ä¢ Implementa√ß√£o de automa√ß√µes MT199/MT999

FORMA√á√ÉO
‚Ä¢ Executive MBA - EAE Business School
‚Ä¢ Mestrado em Gest√£o de Projetos - Universitat de Barcelona
‚Ä¢ Oficial de Log√≠stica - Marinha do Brasil

COMPET√äNCIAS T√âCNICAS
SWIFT, ISO20022, SEPA, Pagamentos Instant√¢neos, Euro Digital, Lean Six Sigma, Value Stream Mapping

IDIOMAS
Espanhol (Nativo), Portugu√™s (Nativo), Ingl√™s (Avan√ßado B2+)`
            };
            
            document.getElementById('cvInput').value = examples[currentLang];
            document.getElementById('cvCharCount').textContent = examples[currentLang].length;
            checkReady();
        }

        function loadExampleJob() {
            const examples = {
                es: `JEFE DE PROYECTO DE PAGOS
Entidad Financiera L√≠der | Madrid

Responsabilidades:
‚Ä¢ Liderar proyectos de modernizaci√≥n de infraestructura de pagos
‚Ä¢ Gestionar la implementaci√≥n de SEPA Instant y preparaci√≥n para Euro Digital
‚Ä¢ Coordinar equipos multidisciplinares y proveedores tecnol√≥gicos
‚Ä¢ Asegurar cumplimiento normativo (PSD2, regulaci√≥n BCE)
‚Ä¢ Reporting a Direcci√≥n sobre avances y riesgos

Requisitos:
‚Ä¢ M√≠nimo 10 a√±os de experiencia en sistemas de pagos bancarios
‚Ä¢ Conocimiento profundo de SWIFT, ISO20022, SEPA
‚Ä¢ Experiencia en gesti√≥n de proyectos complejos
‚Ä¢ Ingl√©s nivel C1 o superior
‚Ä¢ Certificaci√≥n PMP o equivalente valorada
‚Ä¢ Conocimiento de metodolog√≠as Agile/Lean

Ofrecemos:
‚Ä¢ Contrato indefinido
‚Ä¢ Salario competitivo seg√∫n experiencia
‚Ä¢ Teletrabajo h√≠brido`,
                en: `PAYMENTS PROJECT MANAGER
Leading Financial Institution | Madrid

Responsibilities:
‚Ä¢ Lead payment infrastructure modernization projects
‚Ä¢ Manage SEPA Instant implementation and Digital Euro preparation
‚Ä¢ Coordinate multidisciplinary teams and technology vendors
‚Ä¢ Ensure regulatory compliance (PSD2, ECB regulation)
‚Ä¢ Report to Management on progress and risks

Requirements:
‚Ä¢ Minimum 10 years experience in banking payment systems
‚Ä¢ Deep knowledge of SWIFT, ISO20022, SEPA
‚Ä¢ Experience in complex project management
‚Ä¢ English level C1 or higher
‚Ä¢ PMP certification or equivalent valued
‚Ä¢ Knowledge of Agile/Lean methodologies

We offer:
‚Ä¢ Permanent contract
‚Ä¢ Competitive salary based on experience
‚Ä¢ Hybrid remote work`,
                pt: `GERENTE DE PROJETO DE PAGAMENTOS
Institui√ß√£o Financeira L√≠der | Madrid

Responsabilidades:
‚Ä¢ Liderar projetos de moderniza√ß√£o de infraestrutura de pagamentos
‚Ä¢ Gerenciar implementa√ß√£o de SEPA Instant e prepara√ß√£o para Euro Digital
‚Ä¢ Coordenar equipes multidisciplinares e fornecedores de tecnologia
‚Ä¢ Garantir conformidade regulat√≥ria (PSD2, regula√ß√£o BCE)
‚Ä¢ Reportar √† Diretoria sobre avan√ßos e riscos

Requisitos:
‚Ä¢ M√≠nimo 10 anos de experi√™ncia em sistemas de pagamentos banc√°rios
‚Ä¢ Conhecimento profundo de SWIFT, ISO20022, SEPA
‚Ä¢ Experi√™ncia em gest√£o de projetos complexos
‚Ä¢ Ingl√™s n√≠vel C1 ou superior
‚Ä¢ Certifica√ß√£o PMP ou equivalente valorizada
‚Ä¢ Conhecimento de metodologias Agile/Lean

Oferecemos:
‚Ä¢ Contrato indefinido
‚Ä¢ Sal√°rio competitivo conforme experi√™ncia
‚Ä¢ Teletrabalho h√≠brido`
            };
            
            document.getElementById('jobInput').value = examples[currentLang];
            document.getElementById('jobCharCount').textContent = examples[currentLang].length;
            checkReady();
        }

        // ==================== ANALYSIS ENGINE ====================
        const sectorKeywords = {
            finance: ['swift', 'sepa', 'iso20022', 'pagos', 'payments', 'banking', 'banca', 'psd2', 'compliance', 'riesgo', 'treasury', 'tesorer√≠a', 'trading', 'fintech', 'aml', 'kyc'],
            tech: ['software', 'desarrollo', 'programming', 'agile', 'scrum', 'devops', 'cloud', 'aws', 'python', 'javascript', 'api', 'microservices', 'kubernetes', 'ci/cd'],
            consulting: ['estrategia', 'strategy', 'consulting', 'an√°lisis', 'analysis', 'due diligence', 'business case', 'stakeholder', 'transformation', 'cambio', 'change'],
            marketing: ['branding', 'digital marketing', 'seo', 'sem', 'social media', 'content', 'analytics', 'campaign', 'roi', 'engagement'],
            hr: ['talento', 'talent', 'recruiting', 'onboarding', 'desarrollo', 'performance', 'engagement', 'cultura', 'compensaci√≥n'],
            legal: ['compliance', 'regulaci√≥n', 'normativa', 'legal', 'contratos', 'rgpd', 'gdpr', 'audit', 'riesgo'],
            health: ['pharma', 'clinical', 'regulatory', 'fda', 'ema', 'medical', 'healthcare', 'trials', 'gmp'],
            general: ['gesti√≥n', 'management', 'proyecto', 'project', 'equipo', 'team', 'liderazgo', 'leadership', 'resultados']
        };

        const competencyLabels = {
            es: ['Experiencia', 'T√©cnico', 'Liderazgo', 'Soft Skills', 'Idiomas', 'Formaci√≥n'],
            en: ['Experience', 'Technical', 'Leadership', 'Soft Skills', 'Languages', 'Education'],
            pt: ['Experi√™ncia', 'T√©cnico', 'Lideran√ßa', 'Soft Skills', 'Idiomas', 'Forma√ß√£o']
        };

        function analyzeWithRules(cv, job = null) {
            const cvLower = cv.toLowerCase();
            const sector = selectedSector || 'general';
            const keywords = sectorKeywords[sector] || sectorKeywords.general;
            
            // Count keywords found
            const foundKeywords = keywords.filter(kw => cvLower.includes(kw.toLowerCase()));
            const keywordScore = Math.min(100, (foundKeywords.length / keywords.length) * 150);
            
            // Experience detection
            const yearsMatch = cv.match(/(\d+)\+?\s*(a√±os|years|anos)/i);
            const years = yearsMatch ? parseInt(yearsMatch[1]) : 5;
            const experienceScore = Math.min(100, years * 6);
            
            // Education
            const eduKeywords = ['mba', 'master', 'm√°ster', 'mestrado', 'licenciatura', 'bachelor', 'phd', 'doctorado', 'universidad', 'university', 'certificaci√≥n', 'certification'];
            const eduFound = eduKeywords.filter(k => cvLower.includes(k)).length;
            const educationScore = Math.min(100, 40 + eduFound * 15);
            
            // Languages
            const langKeywords = ['ingl√©s', 'english', 'franc√©s', 'french', 'alem√°n', 'german', 'portugu√™s', 'portuguese', 'c1', 'c2', 'b2', 'nativo', 'native'];
            const langFound = langKeywords.filter(k => cvLower.includes(k)).length;
            const languageScore = Math.min(100, 30 + langFound * 15);
            
            // Leadership
            const leaderKeywords = ['l√≠der', 'leader', 'manager', 'director', 'coordinador', 'coordinator', 'equipo', 'team', 'gesti√≥n', 'management'];
            const leaderFound = leaderKeywords.filter(k => cvLower.includes(k)).length;
            const leadershipScore = Math.min(100, 30 + leaderFound * 12);
            
            // Soft skills
            const softKeywords = ['comunicaci√≥n', 'communication', 'negociaci√≥n', 'negotiation', 'colaboraci√≥n', 'collaboration', 'problem solving', 'anal√≠tico', 'analytical'];
            const softFound = softKeywords.filter(k => cvLower.includes(k)).length;
            const softScore = Math.min(100, 40 + softFound * 15);
            
            // Overall score
            const scores = {
                experience: experienceScore,
                technical: keywordScore,
                leadership: leadershipScore,
                soft: softScore,
                languages: languageScore,
                education: educationScore
            };
            
            const avgScore = Math.round(Object.values(scores).reduce((a,b) => a+b, 0) / 6);
            
            // SWOT
            const swot = {
                strengths: [],
                weaknesses: [],
                opportunities: [],
                threats: []
            };
            
            if (scores.experience >= 70) swot.strengths.push(currentLang === 'en' ? 'Solid professional experience' : currentLang === 'pt' ? 'Experi√™ncia profissional s√≥lida' : 'Experiencia profesional s√≥lida');
            if (scores.technical >= 70) swot.strengths.push(currentLang === 'en' ? 'Strong technical knowledge' : currentLang === 'pt' ? 'Forte conhecimento t√©cnico' : 'S√≥lido conocimiento t√©cnico');
            if (scores.leadership >= 70) swot.strengths.push(currentLang === 'en' ? 'Proven leadership skills' : currentLang === 'pt' ? 'Habilidades de lideran√ßa comprovadas' : 'Capacidad de liderazgo demostrada');
            if (scores.languages >= 70) swot.strengths.push(currentLang === 'en' ? 'Multilingual profile' : currentLang === 'pt' ? 'Perfil multil√≠ngue' : 'Perfil multiling√ºe');
            
            if (scores.technical < 60) swot.weaknesses.push(currentLang === 'en' ? 'Limited technical specialization' : currentLang === 'pt' ? 'Especializa√ß√£o t√©cnica limitada' : 'Especializaci√≥n t√©cnica limitada');
            if (scores.languages < 50) swot.weaknesses.push(currentLang === 'en' ? 'Language skills could improve' : currentLang === 'pt' ? 'Habilidades lingu√≠sticas podem melhorar' : 'Las habilidades ling√º√≠sticas podr√≠an mejorar');
            if (scores.soft < 50) swot.weaknesses.push(currentLang === 'en' ? 'Soft skills not highlighted' : currentLang === 'pt' ? 'Soft skills n√£o destacadas' : 'Soft skills poco destacadas');
            
            swot.opportunities.push(currentLang === 'en' ? 'Digital transformation is growing' : currentLang === 'pt' ? 'Transforma√ß√£o digital em crescimento' : 'La transformaci√≥n digital est√° en crecimiento');
            swot.opportunities.push(currentLang === 'en' ? 'Demand for specialized profiles' : currentLang === 'pt' ? 'Demanda por perfis especializados' : 'Demanda de perfiles especializados');
            
            swot.threats.push(currentLang === 'en' ? 'Increasing competition' : currentLang === 'pt' ? 'Concorr√™ncia crescente' : 'Competencia creciente');
            swot.threats.push(currentLang === 'en' ? 'Rapid technological changes' : currentLang === 'pt' ? 'Mudan√ßas tecnol√≥gicas r√°pidas' : 'Cambios tecnol√≥gicos r√°pidos');
            
            // Recommendations
            const recommendations = [];
            if (scores.technical < 70) {
                recommendations.push({
                    priority: 'high',
                    title: currentLang === 'en' ? 'Strengthen technical profile' : currentLang === 'pt' ? 'Fortalecer perfil t√©cnico' : 'Reforzar perfil t√©cnico',
                    description: currentLang === 'en' ? 'Add more specific technical keywords and certifications' : currentLang === 'pt' ? 'Adicionar mais palavras-chave t√©cnicas e certifica√ß√µes' : 'A√±adir m√°s palabras clave t√©cnicas y certificaciones espec√≠ficas'
                });
            }
            if (scores.languages < 70) {
                recommendations.push({
                    priority: 'medium',
                    title: currentLang === 'en' ? 'Highlight languages' : currentLang === 'pt' ? 'Destacar idiomas' : 'Destacar idiomas',
                    description: currentLang === 'en' ? 'Specify language levels clearly (B2, C1, Native)' : currentLang === 'pt' ? 'Especificar n√≠veis de idioma claramente (B2, C1, Nativo)' : 'Especificar niveles de idioma claramente (B2, C1, Nativo)'
                });
            }
            recommendations.push({
                priority: 'medium',
                title: currentLang === 'en' ? 'Quantify achievements' : currentLang === 'pt' ? 'Quantificar conquistas' : 'Cuantificar logros',
                description: currentLang === 'en' ? 'Add metrics and percentages to demonstrate impact' : currentLang === 'pt' ? 'Adicionar m√©tricas e porcentagens para demonstrar impacto' : 'A√±adir m√©tricas y porcentajes para demostrar impacto'
            });
            
            // Job fit analysis if job provided
            let jobFitData = null;
            if (job) {
                const jobLower = job.toLowerCase();
                const jobKeywords = [...new Set([
                    ...keywords,
                    ...job.match(/\b[a-z√°√©√≠√≥√∫√±]{4,}\b/gi) || []
                ])].filter(k => k.length > 3);
                
                const jobFound = jobKeywords.filter(k => cvLower.includes(k.toLowerCase()));
                const jobMissing = jobKeywords.filter(k => !cvLower.includes(k.toLowerCase())).slice(0, 10);
                
                jobFitData = {
                    found: jobFound.slice(0, 15),
                    missing: jobMissing,
                    golden: jobKeywords.slice(0, 5)
                };
            }
            
            return {
                score: avgScore,
                competencies: scores,
                swot: swot,
                recommendations: recommendations,
                keywords: jobFitData,
                mode: 'rule'
            };
        }

        async function analyzeWithAI(cv, job = null) {
            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey.startsWith('sk-ant-api')) {
                throw new Error('Invalid API Key');
            }

            const promptLang = {
                es: 'Responde en espa√±ol',
                en: 'Respond in English',
                pt: 'Responda em portugu√™s'
            };

            const prompt = job ? 
                `Analiza este CV contra la oferta de trabajo. ${promptLang[currentLang]}.

CV:
${cv}

OFERTA:
${job}

Responde en JSON:
{
    "score": <0-100 fit score>,
    "competencies": {"experience": <0-100>, "technical": <0-100>, "leadership": <0-100>, "soft": <0-100>, "languages": <0-100>, "education": <0-100>},
    "swot": {"strengths": [...], "weaknesses": [...], "opportunities": [...], "threats": [...]},
    "recommendations": [{"priority": "critical|high|medium", "title": "...", "description": "..."}],
    "keywords": {"golden": [...], "found": [...], "missing": [...]}
}` :
                `Analiza este perfil profesional. ${promptLang[currentLang]}.

CV:
${cv}

Sector: ${selectedSector}
Nivel: ${selectedLevel}

Responde en JSON:
{
    "score": <0-100>,
    "competencies": {"experience": <0-100>, "technical": <0-100>, "leadership": <0-100>, "soft": <0-100>, "languages": <0-100>, "education": <0-100>},
    "swot": {"strengths": [...], "weaknesses": [...], "opportunities": [...], "threats": [...]},
    "recommendations": [{"priority": "critical|high|medium", "title": "...", "description": "..."}]
}`;

            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': apiKey,
                    'anthropic-version': '2023-06-01',
                    'anthropic-dangerous-direct-browser-access': 'true'
                },
                body: JSON.stringify({
                    model: 'claude-sonnet-4-20250514',
                    max_tokens: 4000,
                    messages: [{ role: 'user', content: prompt }]
                })
            });

            if (!response.ok) throw new Error('API error: ' + response.status);

            const data = await response.json();
            const jsonMatch = data.content[0].text.match(/\{[\s\S]*\}/);
            if (!jsonMatch) throw new Error('Could not parse response');

            const result = JSON.parse(jsonMatch[0]);
            result.mode = 'ai';
            return result;
        }

        // ==================== MAIN FUNCTIONS ====================
        async function analyzeProfile() {
            const cv = document.getElementById('cvInput').value.trim();
            
            document.getElementById('loading').classList.add('visible');
            
            try {
                let result;
                if (useAI) {
                    result = await analyzeWithAI(cv);
                } else {
                    result = analyzeWithRules(cv);
                }
                
                profileAnalysisResult = result;
                displayResults(result, false);
                
            } catch (error) {
                console.error(error);
                alert('Error: ' + error.message);
                const result = analyzeWithRules(document.getElementById('cvInput').value);
                profileAnalysisResult = result;
                displayResults(result, false);
            } finally {
                document.getElementById('loading').classList.remove('visible');
            }
        }

        async function analyzeJobFit() {
            const cv = document.getElementById('cvInput').value.trim();
            const job = document.getElementById('jobInput').value.trim();
            
            document.getElementById('loading').classList.add('visible');
            
            try {
                let result;
                if (useAI) {
                    result = await analyzeWithAI(cv, job);
                } else {
                    result = analyzeWithRules(cv, job);
                }
                
                displayResults(result, true);
                
            } catch (error) {
                console.error(error);
                alert('Error: ' + error.message);
                displayResults(analyzeWithRules(document.getElementById('cvInput').value, job), true);
            } finally {
                document.getElementById('loading').classList.remove('visible');
            }
        }

        function displayResults(data, isJobFit) {
            document.getElementById('resultsSection').classList.add('visible');
            
            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            
            // Score
            document.getElementById('mainScore').textContent = data.score + '%';
            document.getElementById('scoreLabel').textContent = translations[currentLang][isJobFit ? 'fit_score' : 'profile_score'];
            
            // Score meta
            const scoreLevel = data.score >= 80 ? 'success' : data.score >= 60 ? 'warning' : 'danger';
            const scoreText = {
                success: { es: 'Excelente', en: 'Excellent', pt: 'Excelente' },
                warning: { es: 'Bueno', en: 'Good', pt: 'Bom' },
                danger: { es: 'A mejorar', en: 'Needs improvement', pt: 'A melhorar' }
            };
            
            document.getElementById('scoreMeta').innerHTML = `
                <div class="meta-item">
                    <span class="meta-dot ${scoreLevel}"></span>
                    <span>${scoreText[scoreLevel][currentLang]}</span>
                </div>
                <div class="meta-item">
                    <span style="color: var(--text-muted);">${data.mode === 'ai' ? 'üß† Claude AI' : '‚ö° Quick Analysis'}</span>
                </div>
            `;
            
            // Competencies
            const labels = competencyLabels[currentLang];
            const compKeys = ['experience', 'technical', 'leadership', 'soft', 'languages', 'education'];
            
            document.getElementById('competencyBars').innerHTML = compKeys.map((key, i) => {
                const score = data.competencies[key];
                const level = score >= 80 ? 'excellent' : score >= 65 ? 'good' : score >= 50 ? 'moderate' : 'low';
                return `
                    <div class="comp-item">
                        <span class="comp-name">${labels[i]}</span>
                        <div class="comp-bar">
                            <div class="comp-fill ${level}" style="width: ${score}%"></div>
                        </div>
                        <span class="comp-score">${score}%</span>
                    </div>
                `;
            }).join('');
            
            // Radar chart
            updateRadar(data.competencies, labels);
            
            // SWOT
            document.getElementById('strengths').innerHTML = data.swot.strengths.map(s => `<li>${s}</li>`).join('');
            document.getElementById('weaknesses').innerHTML = data.swot.weaknesses.map(s => `<li>${s}</li>`).join('');
            document.getElementById('opportunities').innerHTML = data.swot.opportunities.map(s => `<li>${s}</li>`).join('');
            document.getElementById('threats').innerHTML = data.swot.threats.map(s => `<li>${s}</li>`).join('');
            
            // Keywords (only for job fit)
            const keywordsCard = document.getElementById('keywordsCard');
            if (isJobFit && data.keywords) {
                keywordsCard.style.display = 'block';
                document.getElementById('goldenKeywords').innerHTML = data.keywords.golden.map(k => `<span class="keyword-tag golden">${k}</span>`).join('');
                document.getElementById('foundKeywords').innerHTML = data.keywords.found.map(k => `<span class="keyword-tag found">${k}</span>`).join('');
                document.getElementById('missingKeywords').innerHTML = data.keywords.missing.map(k => `<span class="keyword-tag missing">${k}</span>`).join('');
            } else {
                keywordsCard.style.display = 'none';
            }
            
            // Recommendations
            document.getElementById('recommendations').innerHTML = data.recommendations.map(r => `
                <div class="recommendation-item">
                    <div class="rec-priority ${r.priority}"></div>
                    <div class="rec-content">
                        <h4>${r.title}</h4>
                        <p>${r.description}</p>
                    </div>
                </div>
            `).join('');
            
            // Show/hide continue to phase 2
            document.getElementById('continueToPhase2').style.display = isJobFit ? 'none' : 'flex';
        }

        function updateRadar(competencies, labels) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            if (radarChart) radarChart.destroy();
            
            const compKeys = ['experience', 'technical', 'leadership', 'soft', 'languages', 'education'];
            
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Profile',
                        data: compKeys.map(k => competencies[k]),
                        fill: true,
                        backgroundColor: 'rgba(184, 134, 11, 0.15)',
                        borderColor: '#b8860b',
                        pointBackgroundColor: '#b8860b',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0,0,0,0.1)' },
                            grid: { color: 'rgba(0,0,0,0.1)' },
                            pointLabels: { 
                                color: currentTheme === 'dark' ? '#a8a29e' : '#57534e',
                                font: { size: 11, family: 'Source Sans 3' }
                            },
                            ticks: { display: false },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        // Initialize
        checkReady();
    </script>
</body>
</html>
